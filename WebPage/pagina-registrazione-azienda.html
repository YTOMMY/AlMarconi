<!DOCTYPE html>
<html lang="it">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Registrazione Azienda</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f4f4f4;
			display: flex;
			justify-content: center;
			align-items: center;
			padding: 30px;
		}

		.form-container {
			background-color: #fff;
			padding: 60px;
			border-radius: 10px;
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
			width: 100%;
			max-width: 400px;
		}

		h2 {
			text-align: center;
			color: #333;
		}

		label {
			display: block;
			margin-top: 15px;
			color: #555;
		}

		input[type="text"],
		input[type="email"],
		input[type="date"],
		input[type="password"] {
			width: 100%;
			padding: 10px;
			margin-top: 5px;
			border-radius: 5px;
			border: 1px solid #ccc;
		}

		.error {
			color: red;
			font-size: 14px;
			margin-top: 5px;
		}

		button {
			margin-top: 20px;
			width: 100%;
			padding: 12px;
			background-color: #007BFF;
			color: white;
			border: none;
			border-radius: 5px;
			font-size: 16px;
			cursor: pointer;
		}

		button:hover {
			background-color: #0056b3;
		}

		/* Aggiungi lo stile per l'immagine dell'occhio */
		.password-container {
			position: relative;
			width: 100%;
		}

		.eye-icon {
			position: absolute;
			right: -15px;
			top: 50%;
			transform: translateY(-50%);
			cursor: pointer;
			width: 24px; /* Puoi regolare la dimensione dell'immagine */
			height: 24px;
		}
	</style>
</head>
<body>

	<div class="form-container">
		<h2>Registrazione Azienda</h2>
		<form action="registrazione-completata.html" method="post" id="registrazioneForm">
		
			<label for="partita-iva">Partita Iva</label>
			<input type="text" id="partita-iva" name="partita-iva" required>
		
			<label for="nome">Nome Azienda</label>
			<input type="text" id="nome" name="nome" required>

			<label for="cognome">Settore</label>
			<input type="text" id="cognome" name="cognome" required>
			
			<label for="indirizzo">Indirizzo sede legale</label>
			<input type="text" id="indirizzo" name="indirizzo" required>
			
			<label for="nome">Nome Referente</label>
			<input type="text" id="nome" name="nome" required>
			
			<label for="cognome">Cognome Referente</label>
			<input type="text" id="cognome" name="cognome" required>
			
			<label for="data-nascita">Data di Nascita Referente</label>
			<input type="date" id="data-nascita" name="data-nascita" required>
			
			<label for="email">Email Referente</label>
			<input type="email" id="email" name="email" required>
			
			<label for="codice-fiscale">Codice Fiscale Referente</label>
			<input type="text" id="codice-fiscale" name="codice-fiscale" required>

			<label for="password">Password</label>
			<div class="password-container">
				<input type="password" id="password" name="password" required>
				<img src="occhio.png" alt="Occhio" class="eye-icon" id="togglePassword">
			</div>

			<label for="conferma-password">Conferma Password</label>
			<div class="password-container">
				<input type="password" id="conferma-password" name="conferma-password" required>
				<img src="occhio.png" alt="Occhio" class="eye-icon" id="toggleConfermaPassword">
			</div>
		 
			<label>
				<input type="checkbox" required> Dichiaro di aver letto e compreso l'<a href="https://www.garanteprivacy.it/regolamentoue" target="_blank">Informativa sulla Privacy</a> e acconsento al trattamento dei miei dati personali ai sensi del Regolamento UE 2016/679(GDPR).
			</label>
			
			<p class="error" id="errore"></p>

			<button type="submit">Registrati</button>
			<button type="reset">Reset</button>
		</form>
	</div>

	<script>
		// Toggle visibility of the password
		const togglePassword = document.getElementById('togglePassword');
		const password = document.getElementById('password');
		const confermaPassword = document.getElementById('conferma-password');
		
		const toggleConfermaPassword = document.getElementById('toggleConfermaPassword');

		// Funzione per il toggle della visibilitÃ  della password
		togglePassword.addEventListener('click', function (e) {
			const type = password.type === 'password' ? 'text' : 'password';
			password.type = type;
		});

		toggleConfermaPassword.addEventListener('click', function (e) {
			const type = confermaPassword.type === 'password' ? 'text' : 'password';
			confermaPassword.type = type;
		});

		// Validazione password e conferma password
		const form = document.getElementById('registrazioneForm');
		const errore = document.getElementById('errore');

		form.addEventListener('submit', function (e) {
			const email = document.getElementById('email').value;
			const confermaEmail = document.getElementById('conferma-email').value;
			const password = document.getElementById('password').value;
			const confermaPassword = document.getElementById('conferma-password').value;

			if (email !== confermaEmail) {
				e.preventDefault();
				errore.textContent = "Le email non corrispondono.";
				return;
			}

			if (password !== confermaPassword) {
				e.preventDefault();
				errore.textContent = "Le password non corrispondono.";
				return;
			}

			errore.textContent = "";
		});
		
		document.getElementById('postForm').addEventListener('submit', function(e) {
		e.preventDefault();

      const data = {
	  
        email: document.getElementById('email').value,
        password: document.getElementById('password').value,
        tipo: document.getElementById('tipo').value
		
      };

      const jsonData = JSON.stringify(data, null, 2);
      document.getElementById('sentJson').textContent = jsonData;

      fetch('http://localhost/AlMarconi/WebPage/api.php/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
		
        body: JSON.stringify(data)
		
      })
	  
      .then(response => response.text()) // <<< trattiamo la risposta come testo
      .then(result => {
        document.getElementById('response').textContent = result;
		
      })
	  
      .catch(error => {
	  
        document.getElementById('response').textContent = 'Errore: ' + error;
		
      });
    });
	
		</script>
	</body>
</html>
